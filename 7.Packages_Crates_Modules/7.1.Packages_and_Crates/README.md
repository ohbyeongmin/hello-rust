# Packages and Crates

모듈 시스템

- Packages: 크레이트를 빌드하고, 테스트하고, 공유하는 데 사용하는 카고 기능.
- Crates: 라이브러리나 실행 가능한 모듈로 구성된 트리 구조.
- Modules and use: 구조, 스코프를 제어하고, 조직 세부 경로를 감추는 데 사용.
- Paths: 구조체, 함수, 모듈 등의 이름을 지정.

크레이트(crate)는 러스트가 컴파일 한 차례에 고려하는 가장 작은 코드 단위이다. 크레이트는 여러 모듈을 담을 수 있고, 모듈은 이 크레이트와 함께 컴파일되는 다른 파일들에 정의되어 있을 수 있다.

크레이트는 바이너리일 수도 있고, 라이브러리일 수도 있다.
바이너리 크레이트(binary crate)는 커맨드 라인 프로그램이나 서버처럼 실행 가능한 실행파일로 컴파일할 수 있는 프로그램이다. 바이너리 크레이트는 실행파일이 실행되면 무슨 일이 일어나는지를 정의한 `main`함수를 포함하고 있어야 한다.

라이브러리 크레이트(library crate)는 `main` 함수를 가지고 있지 않고 실행파일 형태로 컴파일되지 않는다. 그 대신, 여러 프로젝트에서 공용될 의도로 만들어진 기능들이 정의되어 있다.

러스타시안들이 '크레이트' 라고 말하면 대부분 이 라이브러리 크레이트를 의미한다.

크레이트 루트(crate root)는 러스트 컴파일러가 컴파일을 시작하는 소스 파일이고, 크레이트의 루트 모듈을 구성한다.

패키지(package)는 일련의 기능을 제공하는 하나 이상의 크레이트로 구성된 번들이다. 패키지에는 이 크레이트들을 빌드하는 법이 설명된 Cargo.toml 파일이 있다. 카고는 실제로 코드를 빌드하는 데 사용하는 커맨드 라인 도구의 바이너리 크레이트가 포함된 패키지이다.

패키지에는 여러 개의 바이너리 크레이트가 원하는 만큼 포함될 수 있지만, 라이브러리 크레이트는 하나만 넣을 수 있다. 패키지에는 적어도 하나 이상의 크레이트가 포함되어야 하며, 이는 라이브러리든 바이너리든 상관 없다.

카고는 패키지명과 같은 이름의 바이너리 크레이트는 _src/main.rs_ 가 크레이트 루트라는 관례를 준수한다.
마찬가지로, 패키지 디렉터리에 _src/lib.rs_ 파일이 존재할 경우, 카고는 해당 패키지가 패키지명과 같은 이름의 라이브러리 크레이트를 포함하고 있다고 판단한다. 카고는 라이브러리 혹은 바이너리를 빌드할 때 이 크레이트 루트 파일을 `rustc`로 전달한다.

_src/bin_ 디렉터리 내에 파일을 배치하면 각각의 파일이 바이너리 크레이트가 되어, 여러 바이너리 크레이트를 패키지에 포함할 수 있다.
